!function(e){var t={};function n(o){if(t[o])return t[o].exports;var a=t[o]={i:o,l:!1,exports:{}};return e[o].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(o,a,function(t){return e[t]}.bind(null,a));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}([function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return c}));const o=document.querySelector(".comeBack .btn");function a(e){e?o.classList.remove("hidden"):o.classList.add("hidden")}function c(e){o.onclick=()=>{o.classList.add("hidden"),e()}}},function(e,t,n){"use strict";const o={method:"GET",redirect:"follow"},a=new Promise(e=>{fetch("js/site-with-alt.json",o).then(e=>e.json()).then(t=>{e(t)}).catch(e=>console.error(e))});t.a=a},function(e,t,n){"use strict";function o(e,t,n=null){const o=document.createElement("li");o.classList.add("tags__elt");const a=document.createElement(t);return"a"===t&&(a.href=n),a.classList.add("tags__btn","btn","btn--tags"),a.textContent="#"+e,a.ariaLabel="Tag "+e,o.append(a),o}function a(e){const t=document.createElement("article");t.classList.add("cardAuthor");const n=document.createElement("a");n.classList.add("cardAuthor__link"),n.href="./photographe.html?author="+e.id,n.ariaLabel=e.name,t.append(n);const a=document.createElement("div");a.classList.add("cardAuthor__imgBox"),n.append(a);const c=document.createElement("img");c.classList.add("cardAuthor__img"),c.alt="Portrait du photographe "+e.name,c.src="./img/authors/"+e.portrait,a.append(c);const s=document.createElement("h2");s.classList.add("cardAuthor__name"),s.textContent=e.name,n.append(s);const r=document.createElement("div");r.classList.add("cardAuthor__content"),t.append(r);const i=document.createElement("p");i.classList.add("cardAuthor__localisation"),i.textContent=`${e.city}, ${e.country}`,r.append(i);const l=document.createElement("p");l.classList.add("cardAuthor__citation"),l.textContent=e.tagline,r.append(l);const d=document.createElement("p");d.classList.add("cardAuthor__tarif"),d.textContent=e.price+"/jour",r.append(d);const u=document.createElement("div");u.classList.add("cardAuthor__tags"),t.append(u);const m=document.createElement("ul");return m.classList.add("tags"),u.append(m),e.tags.forEach(e=>{const t=o(e,"button");m.append(t)}),t}function c(e){const t=document.querySelector("title"),n="header_author",a=document.querySelector(`#${n} .author__title`),c=document.querySelector(`#${n} .author__localisation`),s=document.querySelector(`#${n} .author__slogan`),r=document.querySelector(`#${n} .tags`),i=document.querySelector(`#${n} .author__img`),l=document.querySelector(".infoAuthor__price span");t.textContent=t.textContent+e.name,a.textContent=e.name,c.textContent=`${e.city}, ${e.country}`,s.textContent=e.tagline,i.src="./img/authors/"+e.portrait,i.alt="Portrait du photographe "+e.name,l.textContent=e.price,e.tags.forEach(e=>{const t=o(e,"a","./?filter="+e);r.append(t)})}n.d(t,"a",(function(){return r}));var s=n(0);function r(){this.CreateElement=function(e,t,n){const o=e;return"card"===t?o.cardPhotographer=new a(e):o.cardHeaderPhotographer=new c(e),o.showCard=function(){const e=document.getElementById("listPhotographers"),t=this.cardPhotographer.querySelectorAll(".tags__btn");Array.from(t).forEach(e=>{e.onclick=()=>{const t=e.textContent.replace(/#/,"").toLowerCase();Object(s.b)(!0),n(t)}}),e.append(this.cardPhotographer)},o}}},function(e,t,n){"use strict";n.r(t);const o=window.location.search,a=new URLSearchParams(o),c=parseInt(a.get("author"),10);c||window.location.replace("/");var s=c,r=n(1),i=n(2);function l(e,t,n=0){const o=document.createElement("div");o.classList.add("listPhoto__card");const a=document.createElement("div");a.classList.add("listPhoto__container");const c=document.createElement("div");let s;c.classList.add("listPhoto__imgBox"),"video"===t?(s=document.createElement("video"),s.textContent=e.alt):(s=document.createElement("img"),s.alt=e.alt),s.classList.add("listPhoto__img"),s.src=e.url,s.tabIndex=n,s.ariaLabel=e.title+", closeup view";const r=document.createElement("div");r.classList.add("listPhoto__content");const i=document.createElement("h2");i.classList.add("listPhoto__title"),i.textContent=e.title;const l=document.createElement("div");l.classList.add("listPhoto__info");const d=document.createElement("span");d.classList.add("listPhoto__price"),d.textContent=e.price+" € ";const u=document.createElement("div");u.tabIndex=n,u.roles="button",u.ariaLabel="AJouter un like",u.classList.add("listPhoto__like"),u.innerHTML=`<span>${e.likes}</span>`;const m=document.createElement("span");return m.classList.add("fas","fa-heart"),u.ariaLabel="Likes",o.append(a),a.append(c),a.append(r),c.append(s),r.append(i),r.append(l),l.append(d),l.append(u),u.append(m),o}function d(e){const t=document.querySelector(".infoAuthor__like span");let n=0;e.forEach(e=>{n+=e.likes}),t.textContent=n}function u(e,t){const n=[],o=document.querySelector("body"),a=document.createElement("div");a.classList.add("lightbox"),a.ariaLabel="image closeup view";const c=document.createElement("div");c.classList.add("lightbox__container");const s=document.createElement("div");s.classList.add("lightbox__blockNav");const r=document.createElement("div");r.classList.add("lightbox__blockNav");const i=document.createElement("span");i.classList.add("lightbox__left","fas","fa-chevron-left"),i.tabIndex=2,i.ariaLabel="Previous image";const l=document.createElement("span");l.classList.add("lightbox__right","fas","fa-chevron-right"),l.tabIndex=3,l.ariaLabel="Next image";const d=document.createElement("span");d.classList.add("lightbox__close","fas","fa-times"),d.tabIndex=1,d.ariaLabel="Close dialog";document.createElement("div").classList.add("lightbox__arrow"),e.forEach((e,o)=>{const a=document.createElement("div");a.classList.add("lightbox__content"),o===t&&a.classList.add("show");const s=document.createElement("div");let r;s.classList.add("lightbox__imgbox"),"video"===e.type?(r=document.createElement("video"),r.textContent=e.alt,r.autoplay=!0,r.loop=!0):(r=document.createElement("img"),r.alt=e.alt),r.classList.add("lightbox__img"),r.src=e.url,r.ariaLabel=e.title;const i=document.createElement("div");i.classList.add("lightbox__title"),i.textContent=e.title,a.append(s),a.append(i),s.append(r),c.append(a),n.push(a)}),a.append(c),s.append(i),r.append(d),r.append(l),c.prepend(s),c.append(r);const u=()=>{n[t].classList.remove("show"),t=t+1===e.length?0:t+1,n[t].classList.add("show")},m=()=>{n[t].classList.remove("show"),t=t-1<0?e.length-1:t-1,n[t].classList.add("show")},p=()=>{e[t].html.querySelector(".listPhoto__img").focus(),a.remove(),document.querySelector("html").removeAttribute("style")};d.onclick=()=>{p()},i.onclick=()=>{m()},l.onclick=()=>{u()},l.onkeydown=e=>{e.shiftKey||"Tab"!==e.key||(e.preventDefault(),d.focus()),"Enter"===e.key&&u()},d.onkeydown=e=>{e.shiftKey&&"Tab"===e.key&&(e.preventDefault(),l.focus()),"Enter"===e.key&&p()},i.onkeydown=e=>{"Enter"===e.key&&m()},a.onkeydown=e=>{"Escape"===e.key&&p(),"ArrowLeft"===e.key&&m(),"ArrowRight"===e.key&&u()},o.append(a),d.focus()}function m(e){e.sort((function(e,t){return t.likes-e.likes}))}const p=[{label:"Prénom",name:"prenom",type:"text"},{label:"Nom",name:"nom",type:"text"},{label:"Email",name:"email",type:"email"},{label:"Votre message",name:"message",type:"textarea"}];function h(e,t){const n=document.createElement("div");n.ariaLabel="Contactez-moi "+e,n.ariaLabelledby="formTitle",n.classList.add("form"),n.id="contact";const o=document.createElement("div");o.classList.add("form__content");const a=document.createElement("div");a.classList.add("form__close","fas","fa-times"),a.ariaLabel="Close Contact form";const c=document.createElement("h1");c.id="formTitle",c.classList.add("form__title"),c.innerHTML="Contactez-moi <br> "+e,o.append(c),o.append(a);let s=50;p.forEach(e=>{const t=function(e,t){const n=document.createElement("div");n.classList.add("form__elt");const o=document.createElement("label");let a;return o.classList.add("form__label"),o.textContent=e.label,o.for=e.name,o.id=e.name,"textarea"===e.type?(a=document.createElement("textarea"),a.classList.add("form__textarea")):(a=document.createElement("input"),a.type=e.type),a.name=e.name,a.ariaLabelledby=e.name,a.classList.add("form__input"),a.tabIndex=t,n.append(o),n.append(a),n}(e,s);o.append(t),s+=1});const r=document.createElement("button");return r.type="submit",r.tabIndex=s,a.tabIndex=s+1,r.textContent="Envoyer",r.ariaLabel="Envoyer",r.classList.add("form__submit","btn"),o.append(r),n.append(o),n}const f=document.querySelector(".listPhoto"),_=[],b=new i.a,y=new function(){this.CreateElement=function(e,t){const n=e;return e.video?(n.type="video",n.title=e.video.replace(/_/g," ").replace(/.mp4/g,""),n.url=`img/${e.photographerId}/${e.video}`,n.html=new l(e,"video"),console.log(n.html)):e.image&&(n.type="image",n.title=e.image.replace(/_/g," ").replace(/.jpg/g,""),n.url=`img/${e.photographerId}/${e.image}`,n.html=new l(e,"image")),n.updateLikes=function(){const e=this.html.querySelector(".listPhoto__like span");this.likes=this.likes+1,e.textContent=this.likes,t()},n.showElement=function(){const e=document.querySelector(".listPhoto");if(this.html){const t=this.html.querySelector(".listPhoto__like");t.onclick=e=>{this.updateLikes()},t.onkeydown=e=>{[32,13].includes(e.keyCode)&&this.updateLikes()},e.append(this.html)}},n}},g=new function(){this.CreateElement=function(e){const t={};t.html=new h(e),t.open=function(){this.html.querySelector(".form__close").onclick=()=>this.close();document.querySelector("body").append(this.html),this.html.querySelector('[name="prenom"]').focus()},t.close=function(){document.getElementById("contact").remove(),document.querySelector("html").removeAttribute("style"),document.querySelector(".author__btn").focus()};const n=t.html.querySelector(".form__close"),o=t.html.querySelector(".form__input");return n.onkeydown=e=>{"Enter"===e.key&&(e.preventDefault(),t.close()),e.shiftKey||"Tab"!==e.key||(e.preventDefault(),o.focus())},t}};let E;function L(){_.forEach((e,t)=>{e.showElement();const n=e.html.querySelector(".listPhoto__img");n.onclick=()=>{u(_,t),document.querySelector("html").style.overflow="hidden"},n.onkeydown=e=>{["Enter","Space"].includes(e.key)&&(u(_,t),document.querySelector("html").style.overflow="hidden")}})}r.a.then(e=>{const t=e.photographers.find(e=>e.id===s),n=b.CreateElement(t,"header");e.media.filter(e=>e.photographerId===s).forEach(e=>{const t=y.CreateElement(e,()=>d(_));_.push(t),m(_),L()}),E=g.CreateElement(n.name),d(_)});(new function(){this.CreateElement=function(e,t){const n={};return n.btn=e.querySelector(".listbox__btn"),n.boxContent=e.querySelector(".listbox__list"),n.options=e.getElementsByClassName("listbox__elt"),n.ariaExpanded=function(e){this.btn.setAttribute("aria-expanded",e)},n.btn.onkeydown=e=>{["Enter","Space"].includes(e.key)&&(n.boxContent.classList.contains("hidden")?n.open():(n.boxContent.classList.add("hidden"),n.btn.focus(),n.close()))},n.btn.onclick=function(){n.open()},n.open=function(){let e=100;Array.from(this.options).forEach(t=>{t.tabIndex=e,100===e&&t.focus(),e+=1}),this.boxContent.classList.remove("hidden"),this.ariaExpanded(!0),this.boxContent.focus()},n.close=function(){n.boxContent.classList.add("hidden"),n.ariaExpanded(!1),n.btn.focus(),Array.from(n.options).forEach(e=>{e.removeAttribute("tabIndex")})},n.updateValue=function(e){this.close();const n=this.options[e].id,o=this.options[e].textContent;this.btn.querySelector(".listbox__btn__text").textContent=o,this.btn.nextSibling.nextElementSibling.setAttribute("aria-activedescendant",n);const a=Array.from(this.options).findIndex(e=>e.classList.contains("selected"));this.options[a].classList.remove("selected"),this.options[a].removeAttribute("aria-selected"),this.options[e].classList.add("selected"),this.options[e].setAttribute("aria-selected",!0),t(o.toLowerCase().trim())},Array.from(n.options).forEach((e,t)=>{e.onkeydown=e=>{e.shiftKey||"Tab"!==e.key||t===n.options.length-1&&(e.preventDefault(),n.options[0].focus()),e.shiftKey&&"Tab"===e.key&&0===t&&(e.preventDefault(),n.options[n.options.length-1].focus()),["Enter","Space"].includes(e.key)&&(e.preventDefault(),n.updateValue(t))},e.onclick=()=>{n.updateValue(t)}}),n}}).CreateElement(document.querySelector(".listbox"),(function(e){switch(e){case"popularité":m(_);break;case"titre":!function(e){e.sort((function(e,t){return[e,t].forEach(e=>{e.image?e.text=e.image.replace(/_/g," "):e.video&&(e.text=e.video.replace(/_/g," "))}),e.text.localeCompare(t.text)}))}(_);break;case"date":!function(e){e.sort((function(e,t){return Date.parse(e.date)-Date.parse(t.date)}))}(_);break;default:m(_)}f.innerHTML="",L()}));document.querySelector(".author__btn").onclick=()=>{E.open(),document.querySelector("html").style.overflow="hidden"}}]);